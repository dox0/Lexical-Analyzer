argc = 1
tag = number
reg = [0-9]
tag = char
reg = [A-Z]|[a-z]
tag = numseq
reg = [number]([number])*
tag = value
reg = [numseq](?|.[numseq]|E(+|-)[numseq])
tag = keyword
reg = int|void|float|#include|if|else|return|auto|while|do
tag = id
reg = ([char]|_)([char]|[number]|_)*
tag = operator
reg = \(|,|\)|<|>|\[|\]|;|%|^|{|}|+|-|\*|/|=|::|:|.|\\\\|!|\||\|\||&|&&
tag = literal
reg = "([char]|[number]|[operator]| |\\\\[char])*"|'([char]|[number]|[operator]|#)'|'\\\\[char]'
tag = temp
reg = [numseq].|[numseq]E|[numseq]E(+|-)|"([char]|[number]|[operator]| )*
-------- preprosessor display ----------
size = 9
tag = number
reg = 0\|1\|2\|3\|4\|5\|6\|7\|8\|9
tag = char
reg = A\|B\|C\|D\|E\|F\|G\|H\|I\|J\|K\|L\|M\|N\|O\|P\|Q\|R\|S\|T\|U\|V\|W\|X\|Y\|Z\|a\|b\|c\|d\|e\|f\|g\|h\|i\|j\|k\|l\|m\|n\|o\|p\|q\|r\|s\|t\|u\|v\|w\|x\|y\|z
tag = numseq
reg = \[number\]\(\[number\]\)\*
tag = value
reg = \[numseq\]\(\?\|.\[numseq\]\|E\(+\|-\)\[numseq\]\)
tag = keyword
reg = int\|void\|float\|#include\|if\|else\|return\|auto\|while\|do
tag = id
reg = \(\[char\]\|_\)\(\[char\]\|\[number\]\|_\)\*
tag = operator
reg = (\|,\|)\|<\|>\|[\|]\|;\|%\|^\|{\|}\|+\|-\|*\|/\|=\|::\|:\|.\|\\\|!\||\|||\|&\|&&
tag = literal
reg = "\(\[char\]\|\[number\]\|\[operator\]\| \|\\\[char\]\)\*"\|'\(\[char\]\|\[number\]\|\[operator\]\|#\)'\|'\\\[char\]'
tag = temp
reg = \[numseq\].\|\[numseq\]E\|\[numseq\]E\(+\|-\)\|"\(\[char\]\|\[number\]\|\[operator\]\| \)\*
----- to dfa -----
value keyword id operator literal temp 
-------- end display -------------------
992 micro seconds
value
37150 micro seconds
keyword
2502 micro seconds
id
2264482 micro seconds
operator
4503 micro seconds
literal
5598566 micro seconds
temp
3390998 micro seconds
===============================
=> start parse.
read cnt = 1024
buf[0] = #
Current content: 
#include "LexicalAnalyzer.hpp"
#include "Preprocessor.hpp"
#include <cstdio>
#include <fstream>
#include <chrono>
using namespace std;

/**
 * 预处理正规式文件
 * @author piratf
 * @param  filePath 正规式文件路径
 * @param  ppr      被更新的预处理对象
 */
void preprocess(const char *filePath, Preprocessor &ppr) {

    auto begin = std::chrono::high_resolution_clock::now();
    ifstream input(filePath);
    char str[N] = {};

    while (!input.eof()) {
        input.getline(str, N, '\n');

        // 处理正规式注释
        if (str[0] && str[0] != '#') {
            std::string reg(str, strlen(str));

            // 处理 CRLF 换行
            if (*reg.rbegin() == 13) {
                reg.pop_back();
            }

            ppr.update(reg);
        }
    }

    input.close();

    ppr.display();
    auto end = std::chrono::high_resolution_clock::now();
    printf("%lld micro seconds\n", std::chrono::duration_cast<std::chrono::microseco
line 1   : (    keyword : #include )
----------> "LexicalAnalyzer.hpp"
error** : Unreachable sequences. line 1
line 2   : (    keyword : #include )
----------> "Preprocessor.hpp"
error** : Unreachable sequences. line 2
line 3   : (    keyword : #include )
line 3   : (   operator : < )
line 3   : (         id : cstdio )
line 3   : (   operator : > )
line 4   : (    keyword : #include )
line 4   : (   operator : < )
line 4   : (         id : fstream )
line 4   : (   operator : > )
line 5   : (    keyword : #include )
line 5   : (   operator : < )
line 5   : (         id : chrono )
line 5   : (   operator : > )
line 6   : (         id : using )
line 6   : (         id : namespace )
line 6   : (         id : std )
line 6   : (   operator : ; )
line 13  : (    comment : /**
 * 预处理正规式文件
 * @author piratf
 * @param  filePath 正规式文件路径
 * @param  ppr      被更新的预处理对象
 */ )
line 14  : (    keyword : void )
line 14  : (         id : preprocess )
line 14  : (   operator : ( )
line 14  : (         id : const )
line 14  : (         id : char )
line 14  : (   operator : * )
line 14  : (         id : filePath )
line 14  : (   operator : , )
line 14  : (         id : Preprocessor )
line 14  : (   operator : & )
line 14  : (         id : ppr )
line 14  : (   operator : ) )
line 14  : (   operator : { )
line 16  : (    keyword : auto )
line 16  : (         id : begin )
line 16  : (   operator : = )
line 16  : (         id : std )
line 16  : (   operator : :: )
line 16  : (         id : chrono )
line 16  : (   operator : :: )
line 16  : (         id : high_resolution_clock )
line 16  : (   operator : :: )
line 16  : (         id : now )
line 16  : (   operator : ( )
line 16  : (   operator : ) )
line 16  : (   operator : ; )
line 17  : (         id : ifstream )
line 17  : (         id : input )
line 17  : (   operator : ( )
line 17  : (         id : filePath )
line 17  : (   operator : ) )
line 17  : (   operator : ; )
line 18  : (         id : char )
line 18  : (         id : str )
line 18  : (   operator : [ )
line 18  : (         id : N )
line 18  : (   operator : ] )
line 18  : (   operator : = )
line 18  : (   operator : { )
line 18  : (   operator : } )
line 18  : (   operator : ; )
line 20  : (    keyword : while )
line 20  : (   operator : ( )
line 20  : (   operator : ! )
line 20  : (         id : input )
line 20  : (   operator : . )
line 20  : (         id : eof )
line 20  : (   operator : ( )
line 20  : (   operator : ) )
line 20  : (   operator : ) )
line 20  : (   operator : { )
line 21  : (         id : input )
line 21  : (   operator : . )
line 21  : (         id : getline )
line 21  : (   operator : ( )
line 21  : (         id : str )
line 21  : (   operator : , )
line 21  : (         id : N )
line 21  : (   operator : , )
line 21  : (    literal : '\n' )
line 21  : (   operator : ) )
line 21  : (   operator : ; )
line 24  : (    comment : // 处理正规式注释 )
line 24  : (    keyword : if )
line 24  : (   operator : ( )
line 24  : (         id : str )
line 24  : (   operator : [ )
line 24  : (      value : 0 )
line 24  : (   operator : ] )
line 24  : (   operator : && )
line 24  : (         id : str )
line 24  : (   operator : [ )
line 24  : (      value : 0 )
line 24  : (   operator : ] )
line 24  : (   operator : ! )
line 24  : (   operator : = )
line 24  : (    literal : '#' )
line 24  : (   operator : ) )
line 24  : (   operator : { )
line 25  : (         id : std )
line 25  : (   operator : :: )
line 25  : (         id : string )
line 25  : (         id : reg )
line 25  : (   operator : ( )
line 25  : (         id : str )
line 25  : (   operator : , )
line 25  : (         id : strlen )
line 25  : (   operator : ( )
line 25  : (         id : str )
line 25  : (   operator : ) )
line 25  : (   operator : ) )
line 25  : (   operator : ; )
line 28  : (    comment : // 处理 CRLF 换行 )
line 28  : (    keyword : if )
line 28  : (   operator : ( )
line 28  : (   operator : * )
line 28  : (         id : reg )
line 28  : (   operator : . )
line 28  : (         id : rbegin )
line 28  : (   operator : ( )
line 28  : (   operator : ) )
line 28  : (   operator : = )
line 28  : (   operator : = )
line 28  : (      value : 13 )
line 28  : (   operator : ) )
line 28  : (   operator : { )
line 29  : (         id : reg )
line 29  : (   operator : . )
line 29  : (         id : pop_back )
line 29  : (   operator : ( )
line 29  : (   operator : ) )
line 29  : (   operator : ; )
line 30  : (   operator : } )
line 32  : (         id : ppr )
line 32  : (   operator : . )
line 32  : (         id : update )
line 32  : (   operator : ( )
line 32  : (         id : reg )
line 32  : (   operator : ) )
line 32  : (   operator : ; )
line 33  : (   operator : } )
line 34  : (   operator : } )
line 36  : (         id : input )
line 36  : (   operator : . )
line 36  : (         id : close )
line 36  : (   operator : ( )
line 36  : (   operator : ) )
line 36  : (   operator : ; )
line 38  : (         id : ppr )
line 38  : (   operator : . )
line 38  : (         id : display )
line 38  : (   operator : ( )
line 38  : (   operator : ) )
line 38  : (   operator : ; )
line 39  : (    keyword : auto )
line 39  : (         id : end )
line 39  : (   operator : = )
line 39  : (         id : std )
line 39  : (   operator : :: )
line 39  : (         id : chrono )
line 39  : (   operator : :: )
line 39  : (         id : high_resolution_clock )
line 39  : (   operator : :: )
line 39  : (         id : now )
line 39  : (   operator : ( )
line 39  : (   operator : ) )
line 39  : (   operator : ; )
line 40  : (         id : printf )
line 40  : (   operator : ( )
line 40  : (    literal : "%lld micro seconds\n" )
line 40  : (   operator : , )
line 40  : (         id : std )
line 40  : (   operator : :: )
line 40  : (         id : chrono )
line 40  : (   operator : :: )
line 40  : (         id : duration_cast )
line 40  : (   operator : < )
line 40  : (         id : std )
line 40  : (   operator : :: )
line 40  : (         id : chrono )
line 40  : (   operator : :: )
read cnt = 1024
buf[0] = m
Current content: 
microseconds>(end - begin).count());
    fflush(stdout);
}

void test(Preprocessor &ppr, LexicalAnalyzer &la) {
    preprocess("input.txt", ppr);
    ppr.buildLA(la);
    la.parse("main.cpp");
}

int main(int argc, char *argv[]) {
    freopen("output.txt", "w", stdout);
    Preprocessor ppr;
    LexicalAnalyzer la;

    printf("argc = %d\n", argc);

    if (argc > 1) {
        preprocess(argv[1], ppr);
        auto begin = std::chrono::high_resolution_clock::now();
        ppr.buildLA(la);
        auto end = std::chrono::high_resolution_clock::now();
        printf("%lld micro seconds\n", std::chrono::duration_cast<std::chrono::microseconds>(end - begin).count());
    } else {
        test(ppr, la);
    }

    if (argc > 2) {
        auto begin = std::chrono::high_resolution_clock::now();
        la.parse(argv[2]);
        auto end = std::chrono::high_resolution_clock::now();
        printf("%lld micro seconds\n", std::chrono::duration_cast<std::chrono::microseconds>(end - begin).count()
line 40  : (         id : microseconds )
line 40  : (   operator : > )
line 40  : (   operator : ( )
line 40  : (         id : end )
line 40  : (   operator : - )
line 40  : (         id : begin )
line 40  : (   operator : ) )
line 40  : (   operator : . )
line 40  : (         id : count )
line 40  : (   operator : ( )
line 40  : (   operator : ) )
line 40  : (   operator : ) )
line 40  : (   operator : ; )
line 41  : (         id : fflush )
line 41  : (   operator : ( )
line 41  : (         id : stdout )
line 41  : (   operator : ) )
line 41  : (   operator : ; )
line 42  : (   operator : } )
line 44  : (    keyword : void )
line 44  : (         id : test )
line 44  : (   operator : ( )
line 44  : (         id : Preprocessor )
line 44  : (   operator : & )
line 44  : (         id : ppr )
line 44  : (   operator : , )
line 44  : (         id : LexicalAnalyzer )
line 44  : (   operator : & )
line 44  : (         id : la )
line 44  : (   operator : ) )
line 44  : (   operator : { )
line 45  : (         id : preprocess )
line 45  : (   operator : ( )
line 45  : (    literal : "input.txt" )
line 45  : (   operator : , )
line 45  : (         id : ppr )
line 45  : (   operator : ) )
line 45  : (   operator : ; )
line 46  : (         id : ppr )
line 46  : (   operator : . )
line 46  : (         id : buildLA )
line 46  : (   operator : ( )
line 46  : (         id : la )
line 46  : (   operator : ) )
line 46  : (   operator : ; )
line 47  : (         id : la )
line 47  : (   operator : . )
line 47  : (         id : parse )
line 47  : (   operator : ( )
line 47  : (    literal : "main.cpp" )
line 47  : (   operator : ) )
line 47  : (   operator : ; )
line 48  : (   operator : } )
line 50  : (    keyword : int )
line 50  : (         id : main )
line 50  : (   operator : ( )
line 50  : (    keyword : int )
line 50  : (         id : argc )
line 50  : (   operator : , )
line 50  : (         id : char )
line 50  : (   operator : * )
line 50  : (         id : argv )
line 50  : (   operator : [ )
line 50  : (   operator : ] )
line 50  : (   operator : ) )
line 50  : (   operator : { )
line 51  : (         id : freopen )
line 51  : (   operator : ( )
line 51  : (    literal : "output.txt" )
line 51  : (   operator : , )
line 51  : (    literal : "w" )
line 51  : (   operator : , )
line 51  : (         id : stdout )
line 51  : (   operator : ) )
line 51  : (   operator : ; )
line 52  : (         id : Preprocessor )
line 52  : (         id : ppr )
line 52  : (   operator : ; )
line 53  : (         id : LexicalAnalyzer )
line 53  : (         id : la )
line 53  : (   operator : ; )
line 55  : (         id : printf )
line 55  : (   operator : ( )
line 55  : (    literal : "argc = %d\n" )
line 55  : (   operator : , )
line 55  : (         id : argc )
line 55  : (   operator : ) )
line 55  : (   operator : ; )
line 57  : (    keyword : if )
line 57  : (   operator : ( )
line 57  : (         id : argc )
line 57  : (   operator : > )
line 57  : (      value : 1 )
line 57  : (   operator : ) )
line 57  : (   operator : { )
line 58  : (         id : preprocess )
line 58  : (   operator : ( )
line 58  : (         id : argv )
line 58  : (   operator : [ )
line 58  : (      value : 1 )
line 58  : (   operator : ] )
line 58  : (   operator : , )
line 58  : (         id : ppr )
line 58  : (   operator : ) )
line 58  : (   operator : ; )
line 59  : (    keyword : auto )
line 59  : (         id : begin )
line 59  : (   operator : = )
line 59  : (         id : std )
line 59  : (   operator : :: )
line 59  : (         id : chrono )
line 59  : (   operator : :: )
line 59  : (         id : high_resolution_clock )
line 59  : (   operator : :: )
line 59  : (         id : now )
line 59  : (   operator : ( )
line 59  : (   operator : ) )
line 59  : (   operator : ; )
line 60  : (         id : ppr )
line 60  : (   operator : . )
line 60  : (         id : buildLA )
line 60  : (   operator : ( )
line 60  : (         id : la )
line 60  : (   operator : ) )
line 60  : (   operator : ; )
line 61  : (    keyword : auto )
line 61  : (         id : end )
line 61  : (   operator : = )
line 61  : (         id : std )
line 61  : (   operator : :: )
line 61  : (         id : chrono )
line 61  : (   operator : :: )
line 61  : (         id : high_resolution_clock )
line 61  : (   operator : :: )
line 61  : (         id : now )
line 61  : (   operator : ( )
line 61  : (   operator : ) )
line 61  : (   operator : ; )
line 62  : (         id : printf )
line 62  : (   operator : ( )
line 62  : (    literal : "%lld micro seconds\n" )
line 62  : (   operator : , )
line 62  : (         id : std )
line 62  : (   operator : :: )
line 62  : (         id : chrono )
line 62  : (   operator : :: )
line 62  : (         id : duration_cast )
line 62  : (   operator : < )
line 62  : (         id : std )
line 62  : (   operator : :: )
line 62  : (         id : chrono )
line 62  : (   operator : :: )
line 62  : (         id : microseconds )
line 62  : (   operator : > )
line 62  : (   operator : ( )
line 62  : (         id : end )
line 62  : (   operator : - )
line 62  : (         id : begin )
line 62  : (   operator : ) )
line 62  : (   operator : . )
line 62  : (         id : count )
line 62  : (   operator : ( )
line 62  : (   operator : ) )
line 62  : (   operator : ) )
line 62  : (   operator : ; )
line 63  : (   operator : } )
line 63  : (    keyword : else )
line 63  : (   operator : { )
line 64  : (         id : test )
line 64  : (   operator : ( )
line 64  : (         id : ppr )
line 64  : (   operator : , )
line 64  : (         id : la )
line 64  : (   operator : ) )
line 64  : (   operator : ; )
line 65  : (   operator : } )
line 67  : (    keyword : if )
line 67  : (   operator : ( )
line 67  : (         id : argc )
line 67  : (   operator : > )
line 67  : (      value : 2 )
line 67  : (   operator : ) )
line 67  : (   operator : { )
line 68  : (    keyword : auto )
line 68  : (         id : begin )
line 68  : (   operator : = )
line 68  : (         id : std )
line 68  : (   operator : :: )
line 68  : (         id : chrono )
line 68  : (   operator : :: )
line 68  : (         id : high_resolution_clock )
line 68  : (   operator : :: )
line 68  : (         id : now )
line 68  : (   operator : ( )
line 68  : (   operator : ) )
line 68  : (   operator : ; )
line 69  : (         id : la )
line 69  : (   operator : . )
line 69  : (         id : parse )
line 69  : (   operator : ( )
line 69  : (         id : argv )
line 69  : (   operator : [ )
line 69  : (      value : 2 )
line 69  : (   operator : ] )
line 69  : (   operator : ) )
line 69  : (   operator : ; )
line 70  : (    keyword : auto )
line 70  : (         id : end )
line 70  : (   operator : = )
line 70  : (         id : std )
line 70  : (   operator : :: )
line 70  : (         id : chrono )
line 70  : (   operator : :: )
line 70  : (         id : high_resolution_clock )
line 70  : (   operator : :: )
line 70  : (         id : now )
line 70  : (   operator : ( )
line 70  : (   operator : ) )
line 70  : (   operator : ; )
line 71  : (         id : printf )
line 71  : (   operator : ( )
line 71  : (    literal : "%lld micro seconds\n" )
line 71  : (   operator : , )
line 71  : (         id : std )
line 71  : (   operator : :: )
line 71  : (         id : chrono )
line 71  : (   operator : :: )
line 71  : (         id : duration_cast )
line 71  : (   operator : < )
line 71  : (         id : std )
line 71  : (   operator : :: )
line 71  : (         id : chrono )
line 71  : (   operator : :: )
line 71  : (         id : microseconds )
line 71  : (   operator : > )
line 71  : (   operator : ( )
line 71  : (         id : end )
line 71  : (   operator : - )
line 71  : (         id : begin )
line 71  : (   operator : ) )
line 71  : (   operator : . )
line 71  : (         id : count )
line 71  : (   operator : ( )
read cnt = 29
buf[0] = )
Current content: 
));
    }

    return 0;
}
line 71  : (   operator : ) )
line 71  : (   operator : ) )
line 71  : (   operator : ; )
line 72  : (   operator : } )
line 74  : (    keyword : return )
line 74  : (      value : 0 )
line 74  : (   operator : ; )
line 75  : (   operator : } )
-------------------------------
Parse end, 2 error found.
===============================
